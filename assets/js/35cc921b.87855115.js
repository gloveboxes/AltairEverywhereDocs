"use strict";(self.webpackChunkaltair_docs=self.webpackChunkaltair_docs||[]).push([[6777],{3905:(e,n,t)=>{t.d(n,{Zo:()=>c,kt:()=>u});var r=t(7294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var p=r.createContext({}),s=function(e){var n=r.useContext(p),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},c=function(e){var n=s(e.components);return r.createElement(p.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},f=r.forwardRef((function(e,n){var t=e.components,i=e.mdxType,a=e.originalType,p=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),f=s(t),u=i,m=f["".concat(p,".").concat(u)]||f[u]||d[u]||a;return t?r.createElement(m,o(o({ref:n},c),{},{components:t})):r.createElement(m,o({ref:n},c))}));function u(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var a=t.length,o=new Array(a);o[0]=f;var l={};for(var p in n)hasOwnProperty.call(n,p)&&(l[p]=n[p]);l.originalType=e,l.mdxType="string"==typeof e?e:i,o[1]=l;for(var s=2;s<a;s++)o[s]=t[s];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}f.displayName="MDXCreateElement"},740:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>p,contentTitle:()=>o,default:()=>d,frontMatter:()=>a,metadata:()=>l,toc:()=>s});var r=t(7462),i=(t(7294),t(3905));const a={},o="Editing files",l={unversionedId:"Programming-the-Altair/Editing-files",id:"Programming-the-Altair/Editing-files",title:"Editing files",description:"The Altair emulator includes the MicroPro Word-Master text editor for editing documents and source code. Word-Master was advanced for its day, but by today's standards, not the most user-friendly.",source:"@site/docs/02-Programming-the-Altair/01-Editing-files.md",sourceDirName:"02-Programming-the-Altair",slug:"/Programming-the-Altair/Editing-files",permalink:"/altair_8800_posix_docs/Programming-the-Altair/Editing-files",draft:!1,editUrl:"https://github.com/gloveboxes/altair_8800_posix_docs/tree/main/docs/02-Programming-the-Altair/01-Editing-files.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Programming the Altair",permalink:"/altair_8800_posix_docs/category/programming-the-altair"},next:{title:"Intel 8080 IO Ports",permalink:"/altair_8800_posix_docs/Programming-the-Altair/i8080-IO-Ports"}},p={},s=[{value:"Ten-minute video introduction to editing files",id:"ten-minute-video-introduction-to-editing-files",level:2},{value:"Copy a file from the Retro Games repo",id:"copy-a-file-from-the-retro-games-repo",level:2},{value:"Editing files with Word-Master",id:"editing-files-with-word-master",level:2},{value:"The Get File (gf) application",id:"the-get-file-gf-application",level:2}],c={toc:s};function d(e){let{components:n,...a}=e;return(0,i.kt)("wrapper",(0,r.Z)({},c,a,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"editing-files"},"Editing files"),(0,i.kt)("p",null,"The Altair emulator includes the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/AzureSphereCloudEnabledAltair8800/Altair8800.manuals/blob/master/Word-Master_Manual.pdf"},"MicroPro Word-Master")," text editor for editing documents and source code. Word-Master was advanced for its day, but by today's standards, not the most user-friendly."),(0,i.kt)("h2",{id:"ten-minute-video-introduction-to-editing-files"},"Ten-minute video introduction to editing files"),(0,i.kt)("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/3C_5WcSWqro",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0}),(0,i.kt)("h2",{id:"copy-a-file-from-the-retro-games-repo"},"Copy a file from the Retro Games repo"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Review the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/AzureSphereCloudEnabledAltair8800/RetroGames"},"Retro Games")," repo.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"From the Altair web terminal CP/M command prompt, run the ",(0,i.kt)("strong",{parentName:"p"},"Get File")," command:"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-cpm"},"gf\n"))),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Select endpoint 1 (GitHub)")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Type the name of the file to be transferred. For example ",(0,i.kt)("strong",{parentName:"p"},"LOVE.BAS"),". Note, that the filenames are case sensitive.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Press ",(0,i.kt)("kbd",null,"Enter")," to start the transfer.")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"From the CP/M command line, start the game. For example"),(0,i.kt)("pre",{parentName:"li"},(0,i.kt)("code",{parentName:"pre",className:"language-cpm"},"mbasic love\n")))),(0,i.kt)("p",null,"Note, a lot of the retro games in the repo expect to find ",(0,i.kt)("strong",{parentName:"p"},"MENU.BAS")," in the CP/M filesystem. So be sure to transfer MENU.BAS as well."),(0,i.kt)("h2",{id:"editing-files-with-word-master"},"Editing files with Word-Master"),(0,i.kt)("p",null,"It is recommended to use Visual Studio Code and the CP/M ",(0,i.kt)("strong",{parentName:"p"},"gf")," program to edit files and then copy them to the Altair filesystem. But for real retrocomputing diehards, the CP/M disk image includes the Word-Master text editor. To use Word-Master, you must switch the web terminal to character input mode."),(0,i.kt)("p",null,"To switch between line input mode and character input mode, select ",(0,i.kt)("strong",{parentName:"p"},"Ctrl+L"),". When you're finished with Word-Master, switch back to line input mode. Line input mode is a more efficient way for the web terminal to communicate with the Altair emulator."),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Screenshot of Altair running the Word-Master text editor.",src:t(4148).Z,width:"917",height:"318"})),(0,i.kt)("p",null,"For more information, view the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/AzureSphereCloudEnabledAltair8800/Altair8800.manuals/blob/master/Word-Master_Manual.pdf?azure-portal=true"},"Word-Master user's guide"),"."),(0,i.kt)("p",null,"The following table lists the Ctrl characters that Word-Master uses. This list is sourced from the ",(0,i.kt)("a",{parentName:"p",href:"https://glasstty.com/?p=1235"},"Experiencing the Altair 8800")," blog."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-text"},"VIDEO MODE SUMMARY\n\n^O   INSERTION ON/OFF           RUB  DELETE CHR LEFT\n^S   CURSOR LEFT CHAR           ^G   DELETE CHR RIGHT\n^D   CURSOR RIGHT CHAR          ^\\   DELETE WORD LEFT\n^A   CURSOR LEFT WORD           ^T   DELETE WORD RIGHT\n^F   CURSOR RIGHT WORD          ^U   DELETE LINE LEFT\n^Q   CURSOR RIGHT TAB           ^K   DELETE LINE RIGHT\n^E   CURSOR UP LINE             ^Y   DELETE WHOLE LINE\n^X   CURSOR DOWN LINE           ^I   PUT TAB IN FILE\n^^   CURSOR TOP/BOT SCREEN      ^N   PUT CRLF IN FILE\n^B   CURSOR RIGHT/LEFT LINE     ^@   DO NEXT CHR 4X\n^W   FILE DOWN 1 LINE           ^P   NEXT CHR IN FILE\n^Z   FILE UP 1 LINE             ^V   NEXT CHR(S) TO VIDEO\n^R   FILE DOWN SCREEN           ESC  EXIT VIDEO MODE\n^C   FILE UP SCREEN             ^J   DISPLAY THIS\n\n")),(0,i.kt)("p",null,"In character input mode, the following keyboard mappings will improve your editing experience:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-text"},"Keyboard key            Word-Master Ctrl Sequence\n----------------------------------------------\nInsert                  ^O   INSERTION ON/OFF\nDelete                  ^G   DELETE CHR RIGHT\nCursor Left             ^S   CURSOR LEFT CHAR\nCursor Right            ^D   CURSOR RIGHT CHAR\nCursor Up               ^E   CURSOR UP LINE\nCursor Down             ^X   CURSOR DOWN LINE\n")),(0,i.kt)("h2",{id:"the-get-file-gf-application"},"The Get File (gf) application"),(0,i.kt)("p",null,"The gf.c application was initially written using the Word-Master text editor. Once it was working sufficiently well, the application was further refined using Visual Studio Code. The Get File (gf) application uses Intel 8080 IO Port instructions to transfer the file over HTTP to the CP/M filesystem."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-c"},'#include <stdio.h>\n#define STG_FILENAME 68\n#define STG_EOF      68\n#define STG_GET_BYTE 202\n\n#define WG_EPNAME   110\n#define WG_GET_URL  111\n#define WWG_SET_URL 112\n#define WG_SELECTED 113\n#define WG_FILENAME 114\n#define WG_GET_BYTE 201\n#define WG_STATUS   33\n\n#define WG_EOF       0\n#define WG_WAITING   1\n#define WG_DATAREADY 2\n#define WG_FAILED    3\n\n#define GET_STRING 200\n\nFILE *fp_input;\nFILE *fp_output;\nchar *endpoint;\nchar *filename;\nchar buf[128];\nint selected_ep;\n\nmain(argc, argv) char **argv;\nint argc;\n{\n    int source;\n    int wg_result;\n\n    fp_input = fopen("stdin", "r");\n\n    printf("\\nFile transfer utility.\\n");\n    printf("Transfer a file from Azure Sphere storage or the web over HTTP(s).\\n\\n");\n\n    if (argc == 2)\n    {\n        while (get_endpoint() == -1)\n        {\n        }\n\n        set_ep_url(endpoint);\n        printf("\\nEndpoint URL set to: %s\\n", endpoint);\n        exit();\n    }\n\n    if (argc == 1)\n    {\n        while (set_selected() == -1)\n        {\n        }\n\n        while (get_filename() == -1)\n\n            printf("\\nTransferring file \'%s\' from endpoint \'%d\'\\n\\n", filename, selected_ep);\n    }\n\n    if ((fp_output = fopen(filename, "w")) == NULL)\n    {\n        printf("Failed to open %s\\n", filename);\n        exit();\n    }\n\n    switch (selected_ep)\n    {\n        case 0:\n            set_stg_fname(filename);\n            immutable_copy();\n            break;\n        case 1:\n            set_fname_web(filename, strlen(filename), 0);\n            wg_result = web_copy();\n            break;\n        case 2:\n            set_fname_web(filename, strlen(filename), 1);\n            wg_result = web_copy();\n            break;\n        default:\n            break;\n    }\n\n    fclose(fp_output);\n    if (wg_result == -1)\n    {\n        printf("\\n\\nWeb copy failed for file \'%s\'. Check filename and network connection\\n", filename);\n        unlink(filename);\n    }\n}\n\nvoid set_ep_url(endpoint) char *endpoint;\n{\n    int len;\n    int c;\n    len = strlen(endpoint);\n    for (c = 0; c < len; c++)\n    {\n        outp(WG_EPNAME, endpoint[c]);\n    }\n\n    outp(WG_EPNAME, 0);\n}\n\n/* get personal endpoint url */\nvoid get_ep_url(endpoint) int endpoint;\n{\n    printf("2) ");\n    char c;\n    outp(WG_GET_URL, 0);\n    while ((c = inp(GET_STRING)) != 0)\n    {\n        printf("%c", c);\n    }\n    printf("%c", \'\\n\');\n}\n\n/* Get selected endpoint URL */\nvoid get_selected_ep()\n{\n    printf("Selected endpoint: ");\n    char c;\n    outp(WG_SELECTED, 0);\n    while ((c = inp(GET_STRING)) != 0)\n    {\n        printf("%c", c);\n    }\n    printf("%c", \'\\n\');\n}\n\n/* Sets the filename to be copied with i8080 port 68 */\nint set_stg_fname(filename)\nchar *filename;\n{\n    int c;\n    int len;\n\n    len = strlen(filename);\n\n    for (c = 0; c < len; c++)\n    {\n        outp(STG_FILENAME, filename[c]);\n    }\n    outp(STG_FILENAME, 0);\n    printf("filename set\\n");\n}\n\n/* copies file byte stream from i8080 port 202 */\nvoid immutable_copy()\n{\n    char ch;\n\n    /* While not end of file read in next byte */\n    while ((ch = inp(STG_EOF)) == 0)\n    {\n        fputc(inp(STG_GET_BYTE), fp_output);\n        printf(".");\n    }\n}\n\n/* set the selected endpoint url */\nint set_selected()\n{\n    char *endpoint;\n\n    printf("Select endpoint:\\n");\n    printf("0) Azure Sphere immutable storage\\n");\n    printf("1) https://raw.githubusercontent.com/AzureSphereCloudEnabledAltair8800/RetroGames/main\\n");\n    get_ep_url(1);\n\n    printf("\\nSelect endpoint number: ");\n    endpoint = fgets(buf, 128, fp_input);\n\n    if (strlen(endpoint) > 2)\n    {\n        return -1;\n    }\n\n    if (endpoint[0] >= \'0\' && endpoint[0] <= \'2\')\n    {\n        selected_ep = atoi(endpoint);\n        return 0;\n    }\n    return -1;\n}\n\n/* Sets the filename to be copied with i8080 port 68 */\nint set_fname_web(filename, len, endpoint)\nchar *filename;\nint len;\nint endpoint;\n{\n    /* Set web endpoint */\n    outp(WWG_SET_URL, endpoint);\n\n    int c;\n    for (c = 0; c < len; c++)\n    {\n        outp(WG_FILENAME, filename[c]);\n    }\n    outp(WG_FILENAME, 0);\n}\n\n/* copies file byte stream */\nint web_copy()\n{\n    char status;\n\n    while ((status = inp(WG_STATUS)) != WG_EOF)\n    {\n        if (status == WG_FAILED)\n        {\n            return -1;\n        }\n\n        if (status == WG_DATAREADY)\n        {\n            fputc(inp(WG_GET_BYTE), fp_output);\n            printf(".");\n        }\n        else\n        {\n            printf("*");\n        }\n    }\n\n    return 0;\n}\n\nint get_filename()\n{\n    int len;\n\n    printf("Enter filename to transfer: ");\n    filename = fgets(buf, 128, fp_input);\n\n    len = strlen(filename);\n\n    if (len < 1 || len > 13)\n    {\n        printf("Filename must be 1 to 12 characters. Try again.\\n");\n        return -1;\n    }\n\n    filename[len - 1] = 0x00;\n\n    return 1;\n}\n\nint get_endpoint()\n{\n    char url[5];\n    int c;\n    int len;\n\n    printf("Enter endpoint url: ");\n\n    endpoint = fgets(buf, 128, fp_input);\n\n    len = strlen(endpoint);\n    len--;\n    endpoint[len] = 0x00;\n\n    if (len < 8)\n    {\n        printf("Invalid endpoint url.\\n");\n        return -1;\n    }\n\n    for (c = 0; c < 4; c++)\n    {\n        url[c] = toupper(endpoint[c]);\n    }\n    url[4] = 0x00;\n\n    if (strcmp(url, "HTTP"))\n    {\n        printf("Invalid endpoint url. Must start with \'http\'.\\n");\n        return -1;\n    }\n\n    return 0;\n}\n')))}d.isMDXComponent=!0},4148:(e,n,t)=>{t.d(n,{Z:()=>r});const r=t.p+"assets/images/word-master-character-mode-778ba92abde30f773784097cfa1c0727.png"}}]);