"use strict";(self.webpackChunkaltair_docs=self.webpackChunkaltair_docs||[]).push([[7302],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>d});var o=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,o,r=function(e,t){if(null==e)return{};var a,o,r={},n=Object.keys(e);for(o=0;o<n.length;o++)a=n[o],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(o=0;o<n.length;o++)a=n[o],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var p=o.createContext({}),s=function(e){var t=o.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},c=function(e){var t=s(e.components);return o.createElement(p.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var a=e.components,r=e.mdxType,n=e.originalType,p=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),u=s(a),d=r,y=u["".concat(p,".").concat(d)]||u[d]||m[d]||n;return a?o.createElement(y,l(l({ref:t},c),{},{components:a})):o.createElement(y,l({ref:t},c))}));function d(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var n=a.length,l=new Array(n);l[0]=u;var i={};for(var p in t)hasOwnProperty.call(t,p)&&(i[p]=t[p]);i.originalType=e,i.mdxType="string"==typeof e?e:r,l[1]=i;for(var s=2;s<n;s++)l[s]=a[s];return o.createElement.apply(null,l)}return o.createElement.apply(null,a)}u.displayName="MDXCreateElement"},6647:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>l,default:()=>m,frontMatter:()=>n,metadata:()=>i,toc:()=>s});var o=a(7462),r=(a(7294),a(3905));const n={},l="Detect anomalies",i={unversionedId:"start/azure-anomaly-detector/Anomaly-detection",id:"start/azure-anomaly-detector/Anomaly-detection",title:"Detect anomalies",description:"In this unit you will run the climate anomaly BASIC application, create an Azure Anomaly Detection API service, and install support for Jupyter Notebooks.",source:"@site/docs/start/azure-anomaly-detector/21-Anomaly-detection.md",sourceDirName:"start/azure-anomaly-detector",slug:"/start/azure-anomaly-detector/Anomaly-detection",permalink:"/altair_8800_docs/start/azure-anomaly-detector/Anomaly-detection",draft:!1,editUrl:"https://github.com/gloveboxes/altair_8800_docs/tree/main/docs/start/azure-anomaly-detector/21-Anomaly-detection.md",tags:[],version:"current",sidebarPosition:21,frontMatter:{},sidebar:"start",previous:{title:"Export IoT Central data",permalink:"/altair_8800_docs/start/azure-anomaly-detector/Export-IoT-Central-Data"}},p={},s=[{value:"Generate climate data with anomalies",id:"generate-climate-data-with-anomalies",level:2},{value:"Create an Anomaly Detector resource in Azure portal",id:"create-an-anomaly-detector-resource-in-azure-portal",level:2},{value:"Install Jupyter notebook support",id:"install-jupyter-notebook-support",level:2},{value:"Open the Anomaly Detector Jupyter Notebook",id:"open-the-anomaly-detector-jupyter-notebook",level:2},{value:"Configure the Anomaly Detector Jupyter Notebook",id:"configure-the-anomaly-detector-jupyter-notebook",level:2},{value:"Run the Anomaly Detector Jupyter Notebook",id:"run-the-anomaly-detector-jupyter-notebook",level:2},{value:"References",id:"references",level:2},{value:"Install Azure Storage Explorer",id:"install-azure-storage-explorer",level:2}],c={toc:s};function m(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,o.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"detect-anomalies"},"Detect anomalies"),(0,r.kt)("p",null,"In this unit you will run the climate anomaly BASIC application, create an Azure Anomaly Detection API service, and install support for Jupyter Notebooks."),(0,r.kt)("p",null,"To learn more about Azure Anomaly Detector API, refer to the ",(0,r.kt)("a",{parentName:"p",href:"https://docs.microsoft.com/azure/cognitive-services/anomaly-detector/"},"Anomaly Detector API Documentation"),"."),(0,r.kt)("h2",{id:"generate-climate-data-with-anomalies"},"Generate climate data with anomalies"),(0,r.kt)("p",null,"Climate change is gradual. To generate a climate change data set run the following BASIC application from the Altair web terminal for at ",(0,r.kt)("strong",{parentName:"p"},"least two hours"),". The anomaly application will generate climate data, injecting some some random temperate data which will be detected by the Azure Anomaly Detector API service."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-cpm"},"mbasic anomaly\n")),(0,r.kt)("h2",{id:"create-an-anomaly-detector-resource-in-azure-portal"},"Create an Anomaly Detector resource in Azure portal"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Create an Azure subscription if you don't have one - ",(0,r.kt)("a",{parentName:"li",href:"https://azure.microsoft.com/free/cognitive-services"},"Create one for free")),(0,r.kt)("li",{parentName:"ul"},"Once you have your Azure subscription, ",(0,r.kt)("a",{parentName:"li",href:"https://portal.azure.com/#create/Microsoft.CognitiveServicesAnomalyDetector"},"create an Anomaly Detector resource")," in the Azure portal to get your API key and API endpoint.")),(0,r.kt)("h2",{id:"install-jupyter-notebook-support"},"Install Jupyter notebook support"),(0,r.kt)("p",null,"Ensure that you have the latest pip; older versions may have trouble with some dependencies:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Download and install Python3 from ",(0,r.kt)("a",{parentName:"p",href:"https://www.python.org/"},"python.org"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Update to the latest pip"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"pip3 install --upgrade pip\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Install required Python libraries"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"pip3 install jupyter pandas numpy bokeh ipywidgets azure.storage.blob matplotlib\n"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Install Visual Studio Code ",(0,r.kt)("a",{parentName:"p",href:"https://marketplace.visualstudio.com/items?itemName=ms-python.python"},"Python Extension")))),(0,r.kt)("p",null,"References:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://docs.jupyter.org/en/latest/install/notebook-classic.html"},"Install Jupyter notebook"),".")),(0,r.kt)("h2",{id:"open-the-anomaly-detector-jupyter-notebook"},"Open the Anomaly Detector Jupyter Notebook"),(0,r.kt)("p",null,"From Visual Studio Code, open the ",(0,r.kt)("strong",{parentName:"p"},"Altair8800/AnomalyDetector/AnomalyDetection.ipynb")," file."),(0,r.kt)("h2",{id:"configure-the-anomaly-detector-jupyter-notebook"},"Configure the Anomaly Detector Jupyter Notebook"),(0,r.kt)("p",null,"You need to update the following variables in the first Jupyter Notebook cell."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},'apikey = "REPLACE_WITH_YOUR_AZURE_ANOMALY_DETECTOR_API_KEY"\nendpoint = "REPLACE_WITH_YOUR_AZURE_ANOMALY_DETECTOR_API_ENDPOINT"\ndevice_id = "REPLACE_WITH_YOUR_IOT_CENTRAL_DEVICE_ID"\nblob_conn_str="REPLACE_WITH_YOUR_STORAGE_ACCOUNT_CONNECTION_STRING"\n')),(0,r.kt)("h2",{id:"run-the-anomaly-detector-jupyter-notebook"},"Run the Anomaly Detector Jupyter Notebook"),(0,r.kt)("p",null,"Select ",(0,r.kt)("strong",{parentName:"p"},"Run All")," from the Jupyter Notebook memu."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"The image shows where the Run All button is displayed in VS Code",src:a(2457).Z,width:"929",height:"66"})),(0,r.kt)("p",null,"The Jupyter Notebook will take approx 2 to 5 minutes to execute depending on how long you have been running the anomaly BASIC application."),(0,r.kt)("p",null,"When the Jupyter Notebook has completed, a chart similar to the following image will be displayed."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"The image shows the output from from running the Anomaly Detector Jupyter Notebook.",src:a(8315).Z,width:"960",height:"720"})),(0,r.kt)("h2",{id:"references"},"References"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"https://techcommunity.microsoft.com/t5/ai-cognitive-services-blog/how-to-spot-time-series-issues-in-real-time-with-anomaly/ba-p/3246001"},"How to spot time-series issues in real-time with Anomaly Detection"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"https://docs.microsoft.com/en-us/learn/modules/identify-abnormal-time-series-data-anomaly-detector/"},"Identify abnormal time-series data with Anomaly Detector"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"https://docs.microsoft.com/en-us/learn/modules/identify-abnormal-time-series-data-anomaly-detector/4-exercise-send-data-to-cloud"},"https://docs.microsoft.com/en-us/learn/modules/identify-abnormal-time-series-data-anomaly-detector/4-exercise-send-data-to-cloud")))),(0,r.kt)("h2",{id:"install-azure-storage-explorer"},"Install Azure Storage Explorer"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Install ",(0,r.kt)("a",{parentName:"li",href:"https://docs.microsoft.com/azure/vs-azure-tools-storage-manage-with-storage-explorer"},"Azure Storage Explorer"),"."),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("a",{parentName:"li",href:"https://docs.microsoft.com/azure/storage/common/storage-explorer-sign-in"},"Sign in")," to Storage Explorer")))}m.isMDXComponent=!0},2457:(e,t,a)=>{a.d(t,{Z:()=>o});const o=a.p+"assets/images/JupyterNotebookRun-497f817c4127b62d6bc9b12f2206caf7.png"},8315:(e,t,a)=>{a.d(t,{Z:()=>o});const o=a.p+"assets/images/bokeh_plot-5d07a7f594c3e0ab6d8dc061caf8015d.png"}}]);