"use strict";(self.webpackChunkaltair_docs=self.webpackChunkaltair_docs||[]).push([[8597],{3905:(e,t,r)=>{r.d(t,{Zo:()=>s,kt:()=>h});var a=r(7294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var l=a.createContext({}),c=function(e){var t=a.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},s=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,o=e.originalType,l=e.parentName,s=p(e,["components","mdxType","originalType","parentName"]),m=c(r),h=n,d=m["".concat(l,".").concat(h)]||m[h]||u[h]||o;return r?a.createElement(d,i(i({ref:t},s),{},{components:r})):a.createElement(d,i({ref:t},s))}));function h(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=r.length,i=new Array(o);i[0]=m;var p={};for(var l in t)hasOwnProperty.call(t,l)&&(p[l]=t[l]);p.originalType=e,p.mdxType="string"==typeof e?e:n,i[1]=p;for(var c=2;c<o;c++)i[c]=r[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,r)}m.displayName="MDXCreateElement"},5930:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>p,toc:()=>c});var a=r(7462),n=(r(7294),r(3905));const o={sidebar_position:4},i="Azure Sphere trust",p={unversionedId:"azsphere/Cloud-services/Azue-IoT-Central/Azure-Sphere-trust",id:"azsphere/Cloud-services/Azue-IoT-Central/Azure-Sphere-trust",title:"Azure Sphere trust",description:"Once your IoT Central application has been created, you must enable trust between your Azure Sphere tenant and your Azure IoT Central application. Trust is enabled by sharing your Azure Sphere tenant Certificate Authority certificate with your IoT Central application.",source:"@site/docs/azsphere/Cloud-services/Azue-IoT-Central/05-Azure-Sphere-trust.md",sourceDirName:"azsphere/Cloud-services/Azue-IoT-Central",slug:"/azsphere/Cloud-services/Azue-IoT-Central/Azure-Sphere-trust",permalink:"/altair_8800_docs/azsphere/Cloud-services/Azue-IoT-Central/Azure-Sphere-trust",draft:!1,editUrl:"https://github.com/gloveboxes/altair_8800_docs/tree/main/docs/azsphere/Cloud-services/Azue-IoT-Central/05-Azure-Sphere-trust.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"azsphere",previous:{title:"New IoT Central app",permalink:"/altair_8800_docs/azsphere/Cloud-services/Azue-IoT-Central/Create-an-IoT-Central-app"},next:{title:"Endpoint security",permalink:"/altair_8800_docs/azsphere/Cloud-services/Azue-IoT-Central/IoT-Central-endpoints"}},l={},c=[{value:"Create an Enrollment Group",id:"create-an-enrollment-group",level:3},{value:"Upload the Azure Sphere tenant CA certificate to Azure IoT Central",id:"upload-the-azure-sphere-tenant-ca-certificate-to-azure-iot-central",level:3},{value:"Verify the tenant CA certificate",id:"verify-the-tenant-ca-certificate",level:3}],s={toc:c};function u(e){let{components:t,...o}=e;return(0,n.kt)("wrapper",(0,a.Z)({},s,o,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"azure-sphere-trust"},"Azure Sphere trust"),(0,n.kt)("p",null,"Once your IoT Central application has been created, you must enable trust between your Azure Sphere tenant and your Azure IoT Central application. Trust is enabled by sharing your Azure Sphere tenant Certificate Authority certificate with your IoT Central application."),(0,n.kt)("p",null,"When trust is enabled, any device claimed into your trusted Azure Sphere tenant will be enrolled when it first connects to IoT Central."),(0,n.kt)("p",null,"Follow these steps to enable trust."),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Open a ",(0,n.kt)("strong",{parentName:"p"},"command prompt"),".")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Log in to your Azure Sphere tenant. From the command prompt, run:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-azsphere"},"azsphere login\n"))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Make a note of the current folder. You'll need the name of this folder in the next step.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Download the Azure Sphere tenant certificate authority (CA) certificate. From the command prompt, run:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-azsphere"},"azsphere ca-certificate download --destination CAcertificate.cer\n")))),(0,n.kt)("h3",{id:"create-an-enrollment-group"},"Create an Enrollment Group"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"From the IoT Central web portal, select the hamburger button on the top-left corner of the screen to expand the sidebar menu.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Select ",(0,n.kt)("strong",{parentName:"p"},"Administration"),", then ",(0,n.kt)("strong",{parentName:"p"},"Device Connection"),".")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Select ",(0,n.kt)("strong",{parentName:"p"},"+ New"),".")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Name the enrollment group ",(0,n.kt)("strong",{parentName:"p"},"Azure Sphere"),".")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Leave group type set to ",(0,n.kt)("strong",{parentName:"p"},"IoT devices"),".")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Select Certificates (X.509) from the Attestation type dropdown.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Select ",(0,n.kt)("strong",{parentName:"p"},"Save"),"."))),(0,n.kt)("h3",{id:"upload-the-azure-sphere-tenant-ca-certificate-to-azure-iot-central"},"Upload the Azure Sphere tenant CA certificate to Azure IoT Central"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Select ",(0,n.kt)("strong",{parentName:"p"},"+ Manage primary"),".")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Select the folder icon next to the ",(0,n.kt)("strong",{parentName:"p"},"Primary")," box and navigate to the folder where you downloaded the certificate. If you don't see the .cer file in the list, set the view filter to ",(0,n.kt)("strong",{parentName:"p"},"All files (*)"),". Select the certificate and then select the gear icon next to the ",(0,n.kt)("strong",{parentName:"p"},"Primary")," box.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"The ",(0,n.kt)("strong",{parentName:"p"},"Primary Certificate")," dialog box appears. The ",(0,n.kt)("strong",{parentName:"p"},"Subject")," and ",(0,n.kt)("strong",{parentName:"p"},"Thumbprint")," fields contain information about the current Azure Sphere tenant and primary root certificate."))),(0,n.kt)("h3",{id:"verify-the-tenant-ca-certificate"},"Verify the tenant CA certificate"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Select the ",(0,n.kt)("strong",{parentName:"p"},"Generate verification code"),".")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Copy the verification code to the clipboard."),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("img",{alt:"Screenshot that shows how to verify a certificate.",src:r(5775).Z,width:"701",height:"671"}))),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Download a validation certificate that proves you own the Azure Sphere tenant CA certificate. Replace ",(0,n.kt)("strong",{parentName:"p"},"<code",">")," in the command with the verification code you copied to the clipboard. From a command prompt, run:"),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-azsphere"},"azsphere ca-certificate download-proof --destination ValidationCertification.cer --verification-code <code>\n")),(0,n.kt)("p",{parentName:"li"}," The Azure Sphere Security Service signs the validation certificate with the verification code to prove that you own the Certificate Authority (CA)."))),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Return to Azure IoT Central and select ",(0,n.kt)("strong",{parentName:"p"},"Verify"),".")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"When prompted, select the validation certificate that you generated in the previous step. When the verification process is complete, the ",(0,n.kt)("strong",{parentName:"p"},"Primary Certificate")," dialog box displays the ",(0,n.kt)("strong",{parentName:"p"},"Verified")," message.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Select ",(0,n.kt)("strong",{parentName:"p"},"Close")," to dismiss the box.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Select ",(0,n.kt)("strong",{parentName:"p"},"Save"),"."),(0,n.kt)("p",{parentName:"li"},(0,n.kt)("img",{alt:"Screenshot that shows a verified certificate.",src:r(7838).Z,width:"701",height:"671"})))),(0,n.kt)("hr",null))}u.isMDXComponent=!0},7838:(e,t,r)=>{r.d(t,{Z:()=>a});const a=r.p+"assets/images/certificate-verified-03920e66b0011999ba07bfd10a6af2b6.png"},5775:(e,t,r)=>{r.d(t,{Z:()=>a});const a=r.p+"assets/images/verify-certificate-003f471401b4a6360caf0c2e9dc4c16c.png"}}]);