"use strict";(self.webpackChunkaltair_docs=self.webpackChunkaltair_docs||[]).push([[1425],{3905:(e,t,r)=>{r.d(t,{Zo:()=>s,kt:()=>d});var a=r(7294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var i=a.createContext({}),m=function(e){var t=a.useContext(i),r=t;return e&&(r="function"==typeof e?e(t):l(l({},t),e)),r},s=function(e){var t=m(e.components);return a.createElement(i.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,o=e.originalType,i=e.parentName,s=p(e,["components","mdxType","originalType","parentName"]),u=m(r),d=n,g=u["".concat(i,".").concat(d)]||u[d]||c[d]||o;return r?a.createElement(g,l(l({ref:t},s),{},{components:r})):a.createElement(g,l({ref:t},s))}));function d(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=r.length,l=new Array(o);l[0]=u;var p={};for(var i in t)hasOwnProperty.call(t,i)&&(p[i]=t[i]);p.originalType=e,p.mdxType="string"==typeof e?e:n,l[1]=p;for(var m=2;m<o;m++)l[m]=r[m];return a.createElement.apply(null,l)}return a.createElement.apply(null,r)}u.displayName="MDXCreateElement"},8500:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>i,contentTitle:()=>l,default:()=>c,frontMatter:()=>o,metadata:()=>p,toc:()=>m});var a=r(7462),n=(r(7294),r(3905));const o={},l="Power management",p={unversionedId:"azsphere/Deploy-the-Altair/power-management",id:"azsphere/Deploy-the-Altair/power-management",title:"Power management",description:"The Altair running on Azure Sphere takes advantage of advanced power management features to reduce power consumption.",source:"@site/docs/azsphere/01-Deploy-the-Altair/07-power-management.md",sourceDirName:"azsphere/01-Deploy-the-Altair",slug:"/azsphere/Deploy-the-Altair/power-management",permalink:"/altair_8800_docs/azsphere/Deploy-the-Altair/power-management",draft:!1,editUrl:"https://github.com/gloveboxes/altair_8800_docs/tree/main/docs/azsphere/01-Deploy-the-Altair/07-power-management.md",tags:[],version:"current",sidebarPosition:7,frontMatter:{},sidebar:"azsphere",previous:{title:"Connect Altair web terminal",permalink:"/altair_8800_docs/azsphere/Deploy-the-Altair/Connect-Altair-web-terminal"},next:{title:"Compile the Altair",permalink:"/altair_8800_docs/category/compile-the-altair"}},i={},m=[{value:"Automatic sleep",id:"automatic-sleep",level:2},{value:"Power management settings",id:"power-management-settings",level:2},{value:"The CP/M power command",id:"the-cpm-power-command",level:3},{value:"i8080 power management IO ports",id:"i8080-power-management-io-ports",level:2},{value:"C code",id:"c-code",level:3},{value:"Microsoft BASIC code",id:"microsoft-basic-code",level:3},{value:"Assembly code",id:"assembly-code",level:3}],s={toc:m};function c(e){let{components:t,...r}=e;return(0,n.kt)("wrapper",(0,a.Z)({},s,r,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"power-management"},"Power management"),(0,n.kt)("p",null,"The Altair running on Azure Sphere takes advantage of advanced power management features to reduce power consumption."),(0,n.kt)("h2",{id:"automatic-sleep"},"Automatic sleep"),(0,n.kt)("p",null,"By default, the Altair emulator will auto sleep after 10 minutes of no terminal activity. Sleep will halt the Intel 8080 CPU emulator, disable WiFi, and place the Azure Sphere in low performance mode."),(0,n.kt)("p",null,"To wake the emulator, press button ",(0,n.kt)("strong",{parentName:"p"},"B")," on the Azure Sphere Developer Kit."),(0,n.kt)("h2",{id:"power-management-settings"},"Power management settings"),(0,n.kt)("p",null,"The following table describes how to use the power management settings. From the CP/M command prompt, run the ",(0,n.kt)("inlineCode",{parentName:"p"},"power")," command."),(0,n.kt)("h3",{id:"the-cpm-power-command"},"The CP/M power command"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Command"),(0,n.kt)("th",{parentName:"tr",align:null},"Description"))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"power d"),(0,n.kt)("td",{parentName:"tr",align:null},"Disable power management")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"power e"),(0,n.kt)("td",{parentName:"tr",align:null},"Enable power management")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"power s"),(0,n.kt)("td",{parentName:"tr",align:null},"Force to the Altair to sleep")))),(0,n.kt)("h2",{id:"i8080-power-management-io-ports"},"i8080 power management IO ports"),(0,n.kt)("p",null,"The power management IO ports are used to control the power management settings. See the i8080 ",(0,n.kt)("a",{parentName:"p",href:"https://gloveboxes.github.io/altair_8800_docs/start/programming/i8080-IO-Ports#azure-sphere-specific-ports"},"Azure Sphere specific ports")," for information on how to use the IO ports"),(0,n.kt)("p",null,"The power management IO ports can be used to control the power management settings from your custom Altair applications. The following code snippets show how to control the power management."),(0,n.kt)("p",null,"These examples first disable the power management, then enable the power management, then set wake from sleep to 10 seconds, then force the Altair to sleep."),(0,n.kt)("h3",{id:"c-code"},"C code"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-c"},"outp(66, 0x00);     // Disable power management\noutp(66, 0x01);     // Enable power management\noutp(67, 10);       // Wake from sleep after 10 seconds\noutp(66, 0x02);     // Force to the Altair to sleep\n")),(0,n.kt)("h3",{id:"microsoft-basic-code"},"Microsoft BASIC code"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-basic"},"10 OUT 66, 0:   REM Disable power management\n20 OUT 66, 1:   REM Enable power management\n30 OUT 67, 10:  REM Wake from sleep after 10 seconds\n40 OUT 66, 2:   REM Force to the Altair to sleep\n")),(0,n.kt)("h3",{id:"assembly-code"},"Assembly code"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-asm"},"ORG 0100H   ;CP/M base of TPA (transient program area)\nMVI A,0     ;Disable power management\nOUT 66      ;Call sleep port\n\nMVI A,1     ;Enable power management\nOUT 66      ;Call sleep port\n\nMVI A,10    ;Wake from sleep after 10 seconds\nOUT 67      ;Call wake from sleep port\n\nMVI A,2     ;Force sleep\nOUT 66      ;Call sleep port\n\nRET\n")))}c.isMDXComponent=!0}}]);