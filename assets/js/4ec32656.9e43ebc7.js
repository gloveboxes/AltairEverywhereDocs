"use strict";(self.webpackChunkaltair_docs=self.webpackChunkaltair_docs||[]).push([[9205],{3905:(e,a,t)=>{t.d(a,{Zo:()=>d,kt:()=>k});var r=t(7294);function n(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function i(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?i(Object(t),!0).forEach((function(a){n(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function s(e,a){if(null==e)return{};var t,r,n=function(e,a){if(null==e)return{};var t,r,n={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],a.indexOf(t)>=0||(n[t]=e[t]);return n}(e,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}var l=r.createContext({}),p=function(e){var a=r.useContext(l),t=a;return e&&(t="function"==typeof e?e(a):o(o({},a),e)),t},d=function(e){var a=p(e.components);return r.createElement(l.Provider,{value:a},e.children)},c={inlineCode:"code",wrapper:function(e){var a=e.children;return r.createElement(r.Fragment,{},a)}},m=r.forwardRef((function(e,a){var t=e.components,n=e.mdxType,i=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),m=p(t),k=n,u=m["".concat(l,".").concat(k)]||m[k]||c[k]||i;return t?r.createElement(u,o(o({ref:a},d),{},{components:t})):r.createElement(u,o({ref:a},d))}));function k(e,a){var t=arguments,n=a&&a.mdxType;if("string"==typeof e||n){var i=t.length,o=new Array(i);o[0]=m;var s={};for(var l in a)hasOwnProperty.call(a,l)&&(s[l]=a[l]);s.originalType=e,s.mdxType="string"==typeof e?e:n,o[1]=s;for(var p=2;p<i;p++)o[p]=t[p];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},2439:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>l,contentTitle:()=>o,default:()=>c,frontMatter:()=>i,metadata:()=>s,toc:()=>p});var r=t(7462),n=(t(7294),t(3905));const i={},o="Manage disk images",s={unversionedId:"azsphere/Manage-disk-images",id:"azsphere/Manage-disk-images",title:"Manage disk images",description:"Backup an Altair boot SD card",source:"@site/docs/azsphere/40-Manage-disk-images.md",sourceDirName:"azsphere",slug:"/azsphere/Manage-disk-images",permalink:"/altair_8800_posix_docs/azsphere/Manage-disk-images",draft:!1,editUrl:"https://github.com/gloveboxes/altair_8800_posix_docs/tree/main/docs/azsphere/40-Manage-disk-images.md",tags:[],version:"current",sidebarPosition:40,frontMatter:{},sidebar:"azsphere",previous:{title:"Deploy the Altair emulator",permalink:"/altair_8800_posix_docs/azsphere/Cloud-services/Azue-IoT-Central/Deploy-the-Altair-emulator"}},l={},p=[{value:"Backup an Altair boot SD card",id:"backup-an-altair-boot-sd-card",level:2},{value:"Extract Altair disk images from a backup",id:"extract-altair-disk-images-from-a-backup",level:2},{value:"Create an Altair boot disk image from disk images",id:"create-an-altair-boot-disk-image-from-disk-images",level:2}],d={toc:p};function c(e){let{components:a,...t}=e;return(0,n.kt)("wrapper",(0,r.Z)({},d,t,{components:a,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"manage-disk-images"},"Manage disk images"),(0,n.kt)("h2",{id:"backup-an-altair-boot-sd-card"},"Backup an Altair boot SD card"),(0,n.kt)("p",null,"You've been creating apps from the Altair emulator and saving them to the CP/M filesystem. Now you want to backup the contents of the SD card and recreate Altair disk images from the backup."),(0,n.kt)("p",null,"To create a backup, you extract the Altair SD card contents to a binary file. Then you separate the backup file into individual Altair disk images."),(0,n.kt)("p",null,"The process is:"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Remove the SD card from the Azure Sphere device and plug it into your computer.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Open a command prompt and navigate to the ",(0,n.kt)("strong",{parentName:"p"},"Altair_sd_card_image_tools")," folder.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Power off the Azure Sphere device.")),(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Extract the SD card contents to a binary file."),(0,n.kt)("ul",{parentName:"li"},(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"On Linux and macOS, run the ",(0,n.kt)("strong",{parentName:"p"},"DD")," command."),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"sudo dd if=/dev/sda of=altair_extracted_sd_card_image.bin bs=512 count=12000; sync\n"))),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("p",{parentName:"li"},"On Windows, download and run ",(0,n.kt)("a",{parentName:"p",href:"http://www.chrysocome.net/dd"},"dd"),"."),(0,n.kt)("p",{parentName:"li"}," List the Windows disks."),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-powershell"},"dd --list\n")),(0,n.kt)("p",{parentName:"li"}," The following command assumes the SD card is mounted as the D: drive. Adjust the drive letter to be used based on your Windows disk configuration."),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-powershell"},"dd if=\\\\.\\d: of=altair_extracted_sd_card_image.bin bs=512 count=12000\n")))),(0,n.kt)("p",{parentName:"li"},"This will read the SD card into a file named ",(0,n.kt)("em",{parentName:"p"},"altair_extracted_sd_card_image.bin"),"."))),(0,n.kt)("h2",{id:"extract-altair-disk-images-from-a-backup"},"Extract Altair disk images from a backup"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},(0,n.kt)("p",{parentName:"li"},"Run the following command to extract Altair disk images from a SD card backup image."),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre",className:"language-python"},"python3 extract_disks_from_sd_card_image.py\n")),(0,n.kt)("p",{parentName:"li"},"Using the default settings, the ",(0,n.kt)("em",{parentName:"p"},"extract_disks_from_sd_card_image.py")," script will create four Altair disk images."),(0,n.kt)("pre",{parentName:"li"},(0,n.kt)("code",{parentName:"pre"},"- azsphere_cpm63k.dsk\n- bdsc-v1.60.dsk\n- escape.dsk\n- blank.dsk\n")))),(0,n.kt)("h2",{id:"create-an-altair-boot-disk-image-from-disk-images"},"Create an Altair boot disk image from disk images"),(0,n.kt)("p",null,"Altair disk images can be used to create an Altair boot image to be flashed to an SD card."),(0,n.kt)("p",null,"To create an SD card binary image from Altair disk images, run the following command:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"create_sd_card_image_from_disks.py\n")),(0,n.kt)("p",null,"By default, the ",(0,n.kt)("strong",{parentName:"p"},"create_sd_card_image_from_disks.py")," Python script will create a binary disk image file named ",(0,n.kt)("strong",{parentName:"p"},"altair_burn_disk_image.bin")," from the following disk images:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"- azsphere_cpm63k.dsk\n- bdsc-v1.60.dsk\n- escape.dsk\n- blank.dsk\n")))}c.isMDXComponent=!0}}]);